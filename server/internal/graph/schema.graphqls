# GraphQL schema example
#
# https://gqlgen.com/getting-started/

type Todo {
  id: ID!
  text: String!
  done: Boolean!
  user: User!
}

enum Role {
  USER
  ADMIN
}

type User {
  id: ID!
  username: String!
  email: String!
  createdAt: Int!
  updatedAt: Int!
  role: Role!
}

input Register {
  username: String!
  email: String!
  password: String!
}

type Capstone {
  id: ID!
  title: String!
  description: String!
  author: String!
  createdAt: Int!
  updatedAt: Int!
  semester: String!
}

type Query {
  searchCapstones(query: String!, limit: Int!, offset: Int): PaginatedCapstones!
  capstones(limit: Int!, cursor: Int): PaginatedCapstones!
  capstone(id: Int!): Capstone
  users: [PublicUser!]!
  me: User
}

type PaginatedCapstones {
  capstones: [Capstone]!
  hasMore: Boolean!
}

input NewCapstone {
  title: String!
  description: String!
  author: String!
  semester: String!
}

input Login {
  usernameOrEmail: String!
  password: String!
}

type UserError {
  field: String!
  message: String!
}

type UserResponse {
  user: User
  error: UserError
}

type PublicUser {
  username: String!
}

type Mutation {
  createCapstone(input: NewCapstone!): Capstone!
  register(input: Register!): UserResponse!
  login(input: Login!): UserResponse!
  logout: Boolean!
}
